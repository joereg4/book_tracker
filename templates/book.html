{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="mb-4">
        <a href="{{ back_url }}" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to {{ current_shelf|replace('_', ' ')|title }} Shelf
        </a>
    </div>

    <div class="row">
        <div class="col-md-4">
            {% if book.thumbnail %}
            <img src="{{ book.thumbnail|replace('http:', 'https:') }}" 
                 class="img-fluid rounded shadow" 
                 alt="{{ book.title }}"
                 style="max-width: 300px;">
            {% endif %}
            
            <div class="mt-4">
                <form action="{{ url_for('update_status', book_id=book.id) }}" method="POST">
                    <select name="status" class="form-select mb-2" onchange="this.form.submit()">
                        <option value="to_read" {% if current_shelf == 'to_read' %}selected{% endif %}>To Read</option>
                        <option value="reading" {% if current_shelf == 'reading' %}selected{% endif %}>Currently Reading</option>
                        <option value="read" {% if current_shelf == 'read' %}selected{% endif %}>Read</option>
                        <option value="remove">Remove</option>
                    </select>
                </form>
            </div>
        </div>
        
        <div class="col-md-8">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h1>{{ book.title }}</h1>
                <a href="{{ url_for('edit_book', book_id=book.id) }}" class="btn btn-outline-primary">
                    <i class="bi bi-pencil"></i> Edit
                </a>
            </div>
            <h4 class="text-muted mb-4">{{ book.authors }}</h4>
            
            <div class="mb-4">
                <small class="text-muted">
                    {% if book.published_date %}Published: {{ book.published_date }}{% endif %}
                    {% if book.page_count %} • {{ book.page_count }} pages{% endif %}
                    {% if book.categories %} • {{ book.categories }}{% endif %}
                    {% if current_shelf == 'read' and book.date_read %}
                        <br>Read on: {{ book.date_read.strftime('%B %d, %Y') }}
                    {% endif %}
                </small>
            </div>
            
            {% if book.description %}
            <div class="mb-4">
                <h5>Description</h5>
                <p>{{ book.description|safe }}</p>
            </div>
            {% endif %}
            
            <div class="row">
                {% if book.publisher %}
                <div class="col-md-6 mb-3">
                    <h5>Publisher</h5>
                    <p>{{ book.publisher }}</p>
                </div>
                {% endif %}
                
                {% if book.isbn or book.isbn13 %}
                <div class="col-md-6 mb-3">
                    <h5>ISBN</h5>
                    {% if book.isbn13 %}
                    <p>ISBN-13: {{ book.isbn13 }}</p>
                    {% endif %}
                    {% if book.isbn %}
                    <p>ISBN-10: {{ book.isbn }}</p>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %} 